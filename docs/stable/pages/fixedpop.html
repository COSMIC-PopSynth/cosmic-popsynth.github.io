<!doctype html>
<html class="no-js" lang="en" data-content_root="../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="Citing COSMIC" href="cite.html" /><link rel="prev" title="ClusterMonteCarlo Sampling" href="sample/cluster.html" />

    <!-- Generated with Sphinx 7.3.7 and Furo 2024.08.06 -->
        <title>Generate a population the COSMIC way - COSMIC v3.6.0</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=e15ddae3" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=fd3f3429" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css?v=7f9a90b1" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=302659d7" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/fontawesome.min.css" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/solid.min.css" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/brands.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/cosmic-docs.css?v=4e6f89a8" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-grid.min.css?v=ebdf2caa" />
    
    


<style>
  body {
    --color-code-background: #272822;
  --color-code-foreground: #f8f8f2;
  --color-brand-primary: #3f95e1;
  --color-brand-content: #3f95e1;
  --color-brand-visited: #3f95e1;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --color-brand-primary: #f08c33;
  --color-brand-content: #f08c33;
  --color-brand-visited: #f08c33;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --color-brand-primary: #f08c33;
  --color-brand-content: #f08c33;
  --color-brand-visited: #f08c33;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand"><span class='hide-me'>COSMIC </span>v3.6.0</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="https://cosmic-popsynth.github.io/images/cosmic-popsynth_1200.png" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text"><span class='hide-me'>COSMIC </span>v3.6.0</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="reference_material.html">Configuration and output</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Configuration and output</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="inifile.html">Configuration files</a></li>
<li class="toctree-l2"><a class="reference internal" href="output_info.html">Understanding COSMIC outputs</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="examples.html">Evolving binaries</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Evolving binaries</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="evolve/single.html">Evolving a single binary</a></li>
<li class="toctree-l2"><a class="reference internal" href="evolve/multiple.html">Evolving multiple binaries</a></li>
<li class="toctree-l2"><a class="reference internal" href="evolve/grid.html">Evolving a fixed grid of binaries</a></li>
<li class="toctree-l2"><a class="reference internal" href="evolve/evolve_sample.html">Evolving a Monte-Carlo sampled population</a></li>
<li class="toctree-l2"><a class="reference internal" href="evolve/resolution.html">Dynamic time resolution</a></li>
<li class="toctree-l2"><a class="reference internal" href="evolve/restart.html">Restarting a binary</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="runpop.html">Sampling initial populations</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of Sampling initial populations</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="sample/independent.html">Independent distributions</a></li>
<li class="toctree-l2"><a class="reference internal" href="sample/multidim.html">Multidimensional distributions</a></li>
<li class="toctree-l2"><a class="reference internal" href="sample/cluster.html">ClusterMonteCarlo Sampling</a></li>
</ul>
</li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Generate a population the <cite>COSMIC</cite> way</a></li>
<li class="toctree-l1"><a class="reference internal" href="cite.html">Citing COSMIC</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="developers.html">For Developers</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of For Developers</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="develop/how-it-works.html">Codebase overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="develop/new-settings.html">Creating new settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="develop/adding-options.html">Adding options to existing settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="develop/debugging-vscode.html">Debugging COSMIC</a></li>
<li class="toctree-l2"><a class="reference internal" href="develop/settings-json-file.html"><code class="docutils literal notranslate"><span class="pre">cosmic-settings.json</span></code> file explained</a></li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="https://github.com/COSMIC-popsynth/COSMIC/blob/develop/docs/pages/fixedpop.rst?plain=true" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div><div class="edit-this-page">
  <a class="muted-link" href="https://github.com/COSMIC-popsynth/COSMIC/edit/develop/docs/pages/fixedpop.rst" title="Edit this page">
    <svg><use href="#svg-pencil"></use></svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="generate-a-population-the-cosmic-way">
<span id="fixedpop"></span><h1>Generate a population the <cite>COSMIC</cite> way<a class="headerlink" href="#generate-a-population-the-cosmic-way" title="Link to this heading">¶</a></h1>
<p>Beyond providing a simple interface and several updates to BSE (<a class="reference external" href="https://ui.adsabs.harvard.edu/abs/2002MNRAS.329..897H/abstract">Hurley+2002</a>), COSMIC is designed to adapt the number of systems simulated to each binary evolution model a user selects. This is done by iteratively simulating binaries initialized with ZAMS binary parameters and a star formation history until the distributions of binary parameters specified by the user converge. This process is carried out by <code class="docutils literal notranslate"><span class="pre">cosmic-pop</span></code>. Once this population is simulated, an astrophysical population can be sampled from the output of <code class="docutils literal notranslate"><span class="pre">cosmic-pop</span></code>.</p>
<section id="cosmic-pop">
<h2>cosmic-pop<a class="headerlink" href="#cosmic-pop" title="Link to this heading">¶</a></h2>
<p>The <cite>fixed population</cite> is the output of <code class="docutils literal notranslate"><span class="pre">cosmic-pop</span></code> and is designed to fully describe the distribution of binary parameters that results from a user specified star formation history (SFH) and binary evolution model (BSEDict, specified in an inifile). The fixed population is only simulated once and only contains information about the intrinsic properties of the binary (e.g. masses, semimajor axes, metallicities, etc.) Information about the location and orientation of each binary is <cite>not</cite> contained in the fixed population. The arguments necessary to run the <code class="docutils literal notranslate"><span class="pre">cosmic-pop</span></code> executable can be found using the help command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cosmic-pop<span class="w"> </span>-h
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>usage: cosmic-pop [-h] [--inifile FILE] --final-kstar1 FINAL_KSTAR1
                  [FINAL_KSTAR1 ...] --final-kstar2 FINAL_KSTAR2
                  [FINAL_KSTAR2 ...] [--Niter NITER] [--Nstep NSTEP]
                  [--max-wall-time MAX_WALL_TIME]
                  [--binary_state BINARY_STATE [BINARY_STATE ...]]
                  [--sampling_method SAMPLING_METHOD]
                  [--primary_model PRIMARY_MODEL]
                  [--binfrac_model BINFRAC_MODEL] [--ecc_model ECC_MODEL]
                  [--porb_model PORB_MODEL] [--SF_start SF_START]
                  [--SF_duration SF_DURATION] [--metallicity METALLICITY]
                  [--convergence_params CONVERGENCE_PARAMS [CONVERGENCE_PARAMS ...]]
                  [--convergence_limits CONVERGENCE_LIMITS]
                  [--pop_select POP_SELECT] [--match MATCH]
                  [--apply_convergence_limits [APPLY_CONVERGENCE_LIMITS]]
                  [--seed SEED] [--verbose] [--complib COMPLIB]
                  [--complevel COMPLEVEL] [-n NPROC | --mpi]

options:
  -h, --help            show this help message and exit
  --inifile FILE        Name of ini file of params
  --final-kstar1 FINAL_KSTAR1 [FINAL_KSTAR1 ...]
                        Specify the final condition of kstar1 , you want
                        systems to end at for your samples
  --final-kstar2 FINAL_KSTAR2 [FINAL_KSTAR2 ...]
                        Specify the final condition of kstar2, you want
                        systems to end at for your samples
  --Niter NITER         Number of iterations of binaries to try, will check
                        ever Nstep for convergence
  --Nstep NSTEP         Number of binaries to try before checking for
                        convergence, it will check ever Nstep binaries until
                        it reach Niter binaries
  --max-wall-time MAX_WALL_TIME
                        Maximum wall time (seconds) for sampling binaries
  --binary_state BINARY_STATE [BINARY_STATE ...]
  --sampling_method SAMPLING_METHOD
  --primary_model PRIMARY_MODEL
                        Chooses the initial primary mass function from:
                        salpeter55, kroupa93, kroupa01
  --binfrac_model BINFRAC_MODEL
                        Chooses the binary fraction model from: a float
                        between [0,1], vanHaaften, and offner22
  --ecc_model ECC_MODEL
                        Chooses the initial eccentricity distribution model
                        from: thermal, uniform, and sana12
  --porb_model PORB_MODEL
                        Chooses the initial orbital period distribution model
                        from: log_uniform and sana12
  --SF_start SF_START   Sets the time in the past when star formation
                        initiates in Myr
  --SF_duration SF_DURATION
                        Sets the duration of constant star formation in Myr
  --metallicity METALLICITY
  --convergence_params CONVERGENCE_PARAMS [CONVERGENCE_PARAMS ...]
                        specifies the list of parameters for which you would
                        like to track the distribution shapes for convergence
  --convergence_limits CONVERGENCE_LIMITS
                        dictionary that can contain limits for convergence
                        params
  --pop_select POP_SELECT
                        Used in combination with the specified final_kstar1
                        and final_kstar2 values to select the subpopulation of
                        interest from the evolved population
  --match MATCH         provides the tolerance for the convergence calculation
  --apply_convergence_limits [APPLY_CONVERGENCE_LIMITS]
                        filters the evolved binary population to contain only
                        the binaries that satsify the convergence limits
  --seed SEED
  --verbose             Run in Verbose Mode
  --complib COMPLIB     HDFStore compression library
  --complevel COMPLEVEL
                        HDFStore compression level
  -n NPROC, --nproc NPROC
                        number of processors
  --mpi                 Run with MPI.
</pre></div>
</div>
<section id="inputs">
<h3>Inputs<a class="headerlink" href="#inputs" title="Link to this heading">¶</a></h3>
<section id="params-ini">
<h4>Params.ini<a class="headerlink" href="#params-ini" title="Link to this heading">¶</a></h4>
<p>PLEASE SEE <a class="reference internal" href="inifile.html#inifile"><span class="std std-ref">Configuration files</span></a> for detailed information about the inifile and how it is constructed</p>
<p>The inifile contains five subsections: <code class="docutils literal notranslate"><span class="pre">filters</span></code>, <code class="docutils literal notranslate"><span class="pre">convergence</span></code>, <code class="docutils literal notranslate"><span class="pre">rand_seed</span></code>, and <code class="docutils literal notranslate"><span class="pre">bse</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">filters</span></code> subsection allows you to specify how you would like to filter the binary population. See the inifile for a description of each flag.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">convergence</span></code> subsection allows you to specify a particular region of parameter space where you would like the convergence of each binary parameter distribution to be tested. The only implemented convergence filter is for LISA binaries, where the convergence is computed only for binaries with orbital period less than 5000 s. This allows for low probability, but high signal to noise binaries with very short orbital periods to be fully accounted for.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">rand_seed</span></code> subsections allows you to initialize the population with a random seed for reproduceability. Note that for each simulated binary, COSMIC also returns the initial conditions, including a random seed that will reproduce that exact binary. The random seed produced in the rand_seed subsection allows full populations to be reproduced. This is particularly useful when comparing two popuations, e.g. binary black holes and binary neutron stars, which should be simulated separately, but using the same rand_seed value.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">sampling</span></code> subsection allows you to control how you sample and achieve the initial binaries that you evolve.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">bse</span></code> subsection is where all the BSE flags are specified.</p>
</section>
<section id="sample-command-line">
<h4>Sample command line<a class="headerlink" href="#sample-command-line" title="Link to this heading">¶</a></h4>
<p>Below is an example command line call for <code class="docutils literal notranslate"><span class="pre">cosmic-pop</span></code> with multiprocessing (i.e. shared memory on a single computer):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cosmic-pop<span class="w"> </span>--final-kstar1<span class="w"> </span><span class="m">13</span><span class="w"> </span><span class="m">14</span><span class="w"> </span>--final-kstar2<span class="w"> </span><span class="m">13</span><span class="w"> </span><span class="m">14</span><span class="w"> </span>--inifile<span class="w"> </span>Params.ini<span class="w"> </span>--Nstep<span class="w"> </span><span class="m">1000</span><span class="w"> </span>--Niter<span class="w"> </span><span class="m">1000000000</span><span class="w"> </span>-n<span class="w"> </span><span class="m">2</span>
</pre></div>
</div>
<p>Below is an example command line call for <code class="docutils literal notranslate"><span class="pre">cosmic-pop</span></code> with MPI (i.e. across many computers):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mpiexec<span class="w"> </span>-n<span class="w"> </span><span class="m">2</span><span class="w"> </span>python<span class="w"> </span>PATHTOEXECTUABLEDIRECTORY/cosmic-pop<span class="w"> </span>--final-kstar1<span class="w"> </span><span class="m">13</span><span class="w"> </span><span class="m">14</span><span class="w"> </span>--final-kstar2<span class="w"> </span><span class="m">13</span><span class="w"> </span><span class="m">14</span><span class="w"> </span>--inifile<span class="w"> </span>Params.ini<span class="w"> </span>--Nstep<span class="w"> </span><span class="m">1000</span><span class="w"> </span>--Niter<span class="w"> </span><span class="m">1000000000</span>
</pre></div>
</div>
<p>A breakdown of each argument follows:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--final-kstar1</span> <span class="pre">13</span> <span class="pre">14</span> <span class="pre">--final-kstar2</span> <span class="pre">13</span> <span class="pre">14</span></code> : this tells COSMIC to keep all systems where the primary star is a BH or NS and the secondary star is also a BH or NS.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--inifile</span> <span class="pre">Params.ini</span></code> : this tells COSMIC where to look for the BSE flags that set the binary evolution model; in this case, the inifile is assumed to be in the same directory that the command line call is made</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--Nstep</span> <span class="pre">5000</span> <span class="pre">--Niter</span> <span class="pre">10000000</span> <span class="pre">-n</span> <span class="pre">2</span></code> : this tells COSMIC to use 2 processors (or in the MPI case, MPI tasks) to evolve a maximum of 1e7 systems and check in every 5000 systems to track how the shape of the distributions of the parameters specified in convergence-params change</p></li>
</ul>
</section>
</section>
<section id="stopping-conditions">
<h3>Stopping conditions<a class="headerlink" href="#stopping-conditions" title="Link to this heading">¶</a></h3>
<p>There are two stopping conditions for <code class="docutils literal notranslate"><span class="pre">cosmic-pop</span></code>:</p>
<ol class="arabic simple">
<li><p>The shape of the parameter distributions for the parameters specified in convergence_params section of the inifile file converge to a shape, regardless of adding new binaries to the evolved population. This is quantified by the match criteria detailed in Breivik+2020</p></li>
<li><p>The number of binaries sampled exceeds <code class="docutils literal notranslate"><span class="pre">--Niter</span></code>.</p></li>
</ol>
</section>
<section id="output-of-cosmic-pop">
<h3>Output of cosmic-pop<a class="headerlink" href="#output-of-cosmic-pop" title="Link to this heading">¶</a></h3>
<p>PLEASE SEE <a class="reference internal" href="output_info.html#output-info"><span class="std std-ref">Understanding COSMIC outputs</span></a> for more information about the output data frames including
what each column means and the units.</p>
<p>The output of <code class="docutils literal notranslate"><span class="pre">cosmic-pop</span></code> is the <cite>fixed population</cite>, an hdf5 file with a naming scheme that tells you the Galactic component and final kstars of the population; the data file created by the <code class="docutils literal notranslate"><span class="pre">cosmic-pop</span></code> call above is: dat_DeltaBurst_13_14_13_14.h5.</p>
<p>The fixed population contains several pandas DataFrames accessed by the following keys:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">conv</span></code> : The converged population whose parameters are sepcified by the <code class="docutils literal notranslate"><span class="pre">convergence</span></code> subsection of the inifile</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bpp</span></code> : The evolutionary history of binaries which satisfy the user-specified final kstars and filter in the <code class="docutils literal notranslate"><span class="pre">convergence</span></code> subsection</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bcm</span></code> : The final state of binaries in the bcm array which satisfy the user-specified final kstars and filter in the <code class="docutils literal notranslate"><span class="pre">convergence</span></code> subsection</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">kick_info</span></code> : The magnitude and direction of natal kicks, three dimensional systemic velocity changes, total tilt of orbital plane, and azimuthal angle of orbital angular momentum axis with respect to spins</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">initCond</span></code> : The initial conditions for each binary which satisfies the user-specified final kstars and filter in the <code class="docutils literal notranslate"><span class="pre">convergence</span></code> subsection</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">idx</span></code> : An integer that keeps track of the total number of simulated binaries to maintain proper indexing across several runs of <code class="docutils literal notranslate"><span class="pre">cosmic-pop</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">match</span></code> : Tracks the convergence where match = Log <sub>10</sub> (1-convergence)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mass_binaries</span></code> : Tracks the total mass of binaries needed to create the fixed population</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mass_singles</span></code> : Tracks the total mass of single stars needed to create the fixed population; if the binary fraction is 100%, the mass in singles will be zero</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mass_stars</span></code> : Tracks the total mass of all stars, including binaries and singles, needed to create the fixed population</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">n_binaries</span></code> : Tracks the total number of binaries needed to create the fixed population</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">n_singles</span></code> : Tracks the total number of single stars needed to create the fixed population</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">n_stars</span></code> : Tracks the total number of stars, where n_stars = n_singles + 2*n_binaries, needed to create the fixed population</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">conv</span></code>, <code class="docutils literal notranslate"><span class="pre">bpp</span></code>, <code class="docutils literal notranslate"><span class="pre">bcm</span></code>, and <code class="docutils literal notranslate"><span class="pre">initCond</span></code> DataFrames share a common column called <code class="docutils literal notranslate"><span class="pre">bin_num</span></code> which is used to index the population across the DataFrames.</p>
</section>
</section>
<section id="scaling-to-an-astrophysical-population">
<h2>scaling to an astrophysical population<a class="headerlink" href="#scaling-to-an-astrophysical-population" title="Link to this heading">¶</a></h2>
<p>Once the fixed population is simulated, you can scale the simulation to an astrophysical population by resampling the <code class="docutils literal notranslate"><span class="pre">conv</span></code> DataFrame.</p>
<p>First, we need to load the data which is saved in the same directory where` <code class="docutils literal notranslate"><span class="pre">cosmic-pop</span></code> is called:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="kn">import</span> <span class="nn">pandas</span>

<span class="gp">In [2]: </span><span class="kn">import</span> <span class="nn">numpy</span>

<span class="gp">In [3]: </span><span class="n">conv</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">read_hdf</span><span class="p">(</span><span class="s1">&#39;data/dat_DeltaBurst_13_14_13_14.h5&#39;</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="s1">&#39;conv&#39;</span><span class="p">)</span>

<span class="gp">In [4]: </span><span class="n">total_mass</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">read_hdf</span><span class="p">(</span><span class="s1">&#39;data/dat_DeltaBurst_13_14_13_14.h5&#39;</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="s1">&#39;mass_stars&#39;</span><span class="p">)</span>

<span class="gp">In [5]: </span><span class="n">N_stars</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">read_hdf</span><span class="p">(</span><span class="s1">&#39;data/dat_DeltaBurst_13_14_13_14.h5&#39;</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="s1">&#39;n_stars&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The masses and numbers of stars/binaries is saved at each iteration, so you’ll need to take the maximum mass/number:</p>
</div>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [6]: </span><span class="nb">print</span><span class="p">(</span><span class="n">N_stars</span><span class="p">)</span>
<span class="go">           0</span>
<span class="go">0    9832994</span>
<span class="go">0   19664494</span>
<span class="go">0   29497317</span>
<span class="go">0   39329473</span>
<span class="go">0   49161732</span>
<span class="go">0   58992422</span>
<span class="go">0   68823776</span>
<span class="go">0   78655686</span>
<span class="go">0   88189369</span>
<span class="go">0   98023296</span>
<span class="go">0  107858668</span>
<span class="go">0  117692244</span>
<span class="go">0  127524814</span>
<span class="go">0  136830882</span>
<span class="go">0  146137733</span>
<span class="go">0  155970005</span>
<span class="go">0  165803742</span>
<span class="go">0  175636330</span>
<span class="go">0  185467780</span>
<span class="go">0  195300614</span>
<span class="go">0  205131835</span>
<span class="go">0  214964373</span>
<span class="go">0  224798029</span>
<span class="go">0  234631004</span>
<span class="go">0  244464116</span>

<span class="gp">In [7]: </span><span class="n">total_mass</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">total_mass</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>

<span class="gp">In [8]: </span><span class="n">N_stars</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">N_stars</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>

<span class="gp">In [9]: </span><span class="nb">print</span><span class="p">(</span><span class="n">total_mass</span><span class="p">,</span> <span class="n">N_stars</span><span class="p">)</span>
<span class="go">99434460.72687817 244464116</span>
</pre></div>
</div>
<p>Since COSMIC tracks both the total number and total mass of stars formed, you can either scale by number or mass.</p>
<p>To scale by number, multiply the number of systems in the conv array by the ratio of the total number of stars in the astrophysical population to the total number of stars used to generate the population:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [10]: </span><span class="n">N_astro</span> <span class="o">=</span> <span class="mf">1e10</span>

<span class="gp">In [11]: </span><span class="n">N_13_14_13_14_astro</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">conv</span><span class="p">)</span><span class="o">*</span><span class="n">N_astro</span><span class="o">/</span><span class="n">N_stars</span><span class="p">)</span>

<span class="gp">In [12]: </span><span class="nb">print</span><span class="p">(</span><span class="n">N_13_14_13_14_astro</span><span class="p">)</span>
<span class="go">64590</span>
</pre></div>
</div>
<p>Instead, if you want to scale by mass, you can choose between supplying your own mass or using the built in COSMIC models. The process for a user-supplied mass is nearly identical to scaling by number:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [13]: </span><span class="n">M_astro</span> <span class="o">=</span> <span class="mf">1e11</span>

<span class="gp">In [14]: </span><span class="n">N_13_14_13_14_astro</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">conv</span><span class="p">)</span><span class="o">*</span><span class="n">M_astro</span><span class="o">/</span><span class="n">total_mass</span><span class="p">)</span>

<span class="gp">In [15]: </span><span class="nb">print</span><span class="p">(</span><span class="n">N_13_14_13_14_astro</span><span class="p">)</span>
<span class="go">1587980</span>
</pre></div>
</div>
<p>Now we can generate the astrophysical population:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [16]: </span><span class="n">pop_astro</span> <span class="o">=</span> <span class="n">conv</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">N_13_14_13_14_astro</span><span class="p">,</span> <span class="n">replace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>If you specified a star formation history in the inifile for the <code class="docutils literal notranslate"><span class="pre">cosmic-pop</span></code> call (i.e. by setting <code class="docutils literal notranslate"><span class="pre">SF_start</span></code> and <code class="docutils literal notranslate"><span class="pre">SF_duration</span></code> to follow a star formation history of your choice), the data in the resampled population will also be consistent with that star formation history. If you assigned the same <code class="docutils literal notranslate"><span class="pre">SF_start</span></code> to all binaries in the <code class="docutils literal notranslate"><span class="pre">cosmic-pop</span></code> call, you can assign birth times in post processing. As an example, we can assign a uniform birth time, assuming that the age of the population is 10 Gyr:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [17]: </span><span class="n">pop_astro</span><span class="p">[</span><span class="s1">&#39;tbirth&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10000</span><span class="p">,</span> <span class="n">N_13_14_13_14_astro</span><span class="p">)</span>
</pre></div>
</div>
<p>Since we are interested in NSs/BHs that form before the present, we can filter out anything that has a formation time after 10 Gyr:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [18]: </span><span class="n">pop_astro</span> <span class="o">=</span> <span class="n">pop_astro</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">pop_astro</span><span class="o">.</span><span class="n">tbirth</span> <span class="o">+</span> <span class="n">pop_astro</span><span class="o">.</span><span class="n">tphys</span> <span class="o">&lt;</span> <span class="mi">10000</span><span class="p">]</span>
</pre></div>
</div>
<p>This leaves us with a population of NSs/BHs at formation where the formation time is the sum of the birth time and tphys in the <code class="docutils literal notranslate"><span class="pre">conv</span></code> array.</p>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="cite.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Citing COSMIC</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="sample/cluster.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">ClusterMonteCarlo Sampling</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2021, Katie Breivik
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              <a class="muted-link fa-brands fa-solid fa-github fa-2x" href="https://github.com/COSMIC-PopSynth/COSMIC" aria-label="GitHub"></a>
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Generate a population the <cite>COSMIC</cite> way</a><ul>
<li><a class="reference internal" href="#cosmic-pop">cosmic-pop</a><ul>
<li><a class="reference internal" href="#inputs">Inputs</a><ul>
<li><a class="reference internal" href="#params-ini">Params.ini</a></li>
<li><a class="reference internal" href="#sample-command-line">Sample command line</a></li>
</ul>
</li>
<li><a class="reference internal" href="#stopping-conditions">Stopping conditions</a></li>
<li><a class="reference internal" href="#output-of-cosmic-pop">Output of cosmic-pop</a></li>
</ul>
</li>
<li><a class="reference internal" href="#scaling-to-an-astrophysical-population">scaling to an astrophysical population</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/documentation_options.js?v=5349f462"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=5fa4622c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=5eb46824"></script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script src="../_static/custom.js?v=fedf5a9c"></script>
    </body>
</html>